<p id="notice"><%= notice %></p>

<h1>予約一覧</h1>
  <%= form_with model: Resevation.new, method: :get, local: true do |f| %>
    <div class="field">
      <%= f.label '宿泊開始日' %>
      <%= f.date_field :start_stay, value: @search_params[:start_stay] %> ~
      <%= f.label '宿泊終了日' %>
      <%= f.date_field :end_stay, value: @search_params[:end_stay] %>
    </div>
    <%= f.submit "検索" %>
  <% end %>


<table class="table">
  <thead>

    <th scope="col">宿泊開始日</th>
    <th scope="col">宿泊終了日</th>
    <th scope="col">部屋番号</th>
    <th scope="col">苗字</th>
    <th scope="col">名前</th>
    <th scope="col">会社名</th>

  </thead>
  <tbody>

        <% Room.all.each do |room| %>
      <tr>
          <% if @resevations[room.id] %>
          <%# // 対象の部屋に予約がある場合の表示 %>
        <td scope="row"><%= @resevations[room.id][:start_stay] %></td>
        <td scope="row"><%= @resevations[room.id][:end_stay] %></td>
        <td scope="row"><%= room.number %></td>
        <td scope="row"><%= @resevations[room.id].customer.last_name %></td>
        <td scope="row"><%= @resevations[room.id].customer.first_name %></td>
        <td scope="row"><%= @resevations[room.id].customer.company %></td>
        <td><%= link_to 'Show', @resevations[room.id] , class: "btn btn-outline-primary" %></td>
        <td><%= link_to 'Edit', edit_resevation_path(@resevations[room.id]) , class: "btn btn-raised btn-default" %></td>
        <td><%= link_to 'Destroy', @resevations[room.id], method: :delete, data: { confirm: 'Are you sure?' } ,class: "btn btn-raised btn-danger" %></td>
          <% else %>
        <%= render 'form', partial:'new_resevation_path' ,class:"col-3"%>
          <% end %>
        <% end %>




      </tr>


  </tbody>
</table>

<br>

<%= link_to '予約を追加', new_resevation_path , class: 'btn  btn-raised btn-primary' %>
