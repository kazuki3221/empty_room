<p id="notice"><%= notice %></p>

<h1>予約一覧</h1>
  <%= form_with url:'/resevations', method: :get, local: true do |f| %>
    <div class="field">
      <%= f.label :stay %>
      <%= f.date_field :start_stay, value: @search_params[:start_stay] %> ~
      <%= f.date_field :end_stay, value: @search_params[:end_stay] %>
    </div>
    <%= f.submit "検索" %>
  <% end %>


<table>

  <thead>
    <tr class="table">
      <th scope="col">Start stay</th>
      <th scope="col">End stay</th>
      <th scope="col">Room number</th>
      <th scope="col">Last name</th>
      <th scope="col">First name</th>
      <th scope="col">User name</th>
      <th colspan="1"></th>
    </tr>
  </thead>



  <tbody>

      <tr>
        <td scope="row"><%= @search_params[:start_stay] %></td>
        <td scope="row"><%= @search_params[:end_stay] %></td> %>
        <% Room.all.each do |room| %>

          <% if @resevations[room.id] %>
          <%# // 対象の部屋に予約がある場合の表示 %>
           <td scope="row">部屋番号：<%= room.number %></td>
           <% @resevations.each do |resevation| %>
            予約者：<%= resevation[room.id].customer.first_name %>
            <% end %>
          <% else %>
          <%# // 対象の部屋に予約がない場合の表示 %>
          <% end %>
        <% end %>
        <%# <td scope="row"><%= @serch_params[:customer][:last_name] </td> %>
        <%# <td scope="row"><%= resevation.customer.first_name </td>%>
        <%# <td scope="row"><%= resevation.user.username </td>%>
        <%# <td><%= link_to 'Show', resevation , class: "btn btn-outline-primary" %></td>
        <%# <td><%= link_to 'Edit', edit_resevation_path(resevation) , class: "btn btn-raised btn-default" %></td>
        <%# <td><%= link_to 'Destroy', resevation, method: :delete, data: { confirm: 'Are you sure?' } ,class: "btn btn-raised btn-danger" %></td>
      </tr>


  </tbody>
</table>

<br>

<%= link_to '予約を追加', new_resevation_path , class: 'btn  btn-raised btn-primary' %>
